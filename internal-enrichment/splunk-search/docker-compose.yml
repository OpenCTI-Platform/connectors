version: "3"
services:
  connector-splunk-search:
    image: opencti-connector-splunk-search:dev
    build:
      context: ./connectors/internal-enrichment/splunk-search
    environment:
      - OPENCTI_URL=http://opencti:8080
      - OPENCTI_TOKEN=${OPENCTI_ADMIN_TOKEN}
      - CONNECTOR_ID=${CONNECTOR_SPLUNK_SEARCH_ID}
      - CONNECTOR_TYPE=INTERNAL_ENRICHMENT
      - CONNECTOR_NAME=SplunkSearch
      - CONNECTOR_SCOPE=Indicator
      - CONNECTOR_LOG_LEVEL=info
      - CONNECTOR_AUTO=false
      - CONNECTOR_RUN_AND_TERMINATE=false
      - SPLUNK_API_BASE_URL=splunk.testing.filigran.io
      - SPLUNK_API_KEY=${SPLUNK_API_KEY}
      - SPLUNK_VERIFY_SSL=false
    depends_on:
      opencti:
        condition: service_healthy
