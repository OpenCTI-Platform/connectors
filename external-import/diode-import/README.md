# OpenCTI Diode Connector

Import bundles exported by the send_to_directory mode

This connector will impersonate sources connectors registration.

User of the source will also be impersonated if correctly mapped to the target applicant id.
Mapping is required as internal id of the exported user bundle will be different from the target user.

### Configuration variables

Below are the parameters you'll need to set for OpenCTI:

| Parameter     | config.yml | Docker environment variable | Mandatory | Description                                          |
|---------------|------------|-----------------------------|-----------|------------------------------------------------------|
| OpenCTI URL   | url        | `OPENCTI_URL`               | Yes       | The URL of the OpenCTI platform.                     |
| OpenCTI Token | token      | `OPENCTI_TOKEN`             | Yes       | The default admin token set in the OpenCTI platform. |

Below are the parameters you'll need to set for running the connector properly:

| Parameter         | config.yml        | Docker environment variable      | Default      | Mandatory | Description                                                                            |
|-------------------|-------------------|----------------------------------|--------------|-----------|----------------------------------------------------------------------------------------|
| Connector ID      | id                | `CONNECTOR_ID`                   | /            | Yes       | A unique `UUIDv4` identifier for this connector instance.                              |
| Connector Name    | name              | `CONNECTOR_NAME`                 | Diode Import | Yes       | Name of the connector.                                                                 |
| Run and Terminate | run_and_terminate | `CONNECTOR_RUN_AND_TERMINATE`    | False        | No        | Launch the connector once if set to True. Takes 2 available values: `True` or `False`  |
| Log Level         | log_level         | `CONNECTOR_LOG_LEVEL`            | /            | Yes       | Determines the verbosity of the logs. Options are `debug`, `info`, `warn`, or `error`. |

Below are the parameters you'll need to set for Diode Import connector:

| Parameter                 | config.yml                     | Docker environment variable                 | Default | Mandatory | Description                                          |
|---------------------------|--------------------------------|---------------------------------------------|---------|-----------|------------------------------------------------------|
| Directory path            | get_from_directory_path        | `DIODE_IMPORT_GET_FROM_DIRECTORY_PATH`      | /       | Yes       | Path of the directory where bundle will be imported  |
| Directory retention       | get_from_directory_retention   | `DIODE_IMPORT_GET_FROM_DIRECTORY_RETENTION` | 7       | No        | Allows you to specify the duration of file retention |
| Applicant mappings id     | applicant_mappings             | `DIODE_IMPORT_APPLICANT_MAPPINGS`           | /       | Yes       | Map the applicant id source with target id           |

### Warnings

If the file is not generated by a connector with `send_to_directory` set to `True` and/or files are added manually with an incorrect format, the file will be ignored.