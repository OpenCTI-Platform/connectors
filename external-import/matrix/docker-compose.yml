version: '3'
services:
  connector-tchap:
    build: ./tchap-connector
    # container_name: ${CONTAINER_NAME}
    environment:
      # Connector's definition parameters:
      - CONNECTOR_TYPE=EXTERNAL_IMPORT
      - CONNECTOR_NAME=Matrix
      - CONNECTOR_SCOPE=matrix
      # Connector's generic execution parameters:
      - OPENCTI_URL=${OPENCTI_URL}
      - OPENCTI_TOKEN=${OPENCTI_TOKEN}
      - CONNECTOR_ID=${MATRIX_CONNECTOR_ID}
      - CONNECTOR_CONFIDENCE_LEVEL=${MATRIX_CONNECTOR_CONFIDENCE_LEVEL} # From 0 (Unknown) to 100 (Fully trusted).
      - CONNECTOR_LOG_LEVEL=${MATRIX_CONNECTOR_LOG_LEVEL}
      - CONNECTOR_RUN_EVERY=${MATRIX_CONNECTOR_RUN_EVERY}
      # Connector's custom execution parameters:
      - MATRIX_SERVER=${MATRIX_SERVER}
      - MATRIX_USER_ID=${MATRIX_USER_ID}
      - MATRIX_PASSWORD=${MATRIX_PASSWORD}
      - MATRIX_DEVICE_NAME=${MATRIX_DEVICE_NAME}
      - MATRIX_TLP=${MATRIX_TLP}
      - MATRIX_DEBUG=${MATRIX_DEBUG}
    restart: always

networks:
  default:
    external: true
    name: docker_default
