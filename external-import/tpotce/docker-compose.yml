services:
  connector:
    build: .
    environment:
      - OPENCTI_URL=${OPENCTI_URL}
      - OPENCTI_TOKEN=${OPENCTI_TOKEN}
      - CONNECTOR_ID=${CONNECTOR_ID}
      - CONNECTOR_CONFIDENCE_LEVEL=${CONNECTOR_CONFIDENCE_LEVEL}
      - CONNECTOR_LOG_LEVEL=${CONNECTOR_LOG_LEVEL}
      - CONNECTOR_DURATION_PERIOD=${CONNECTOR_DURATION_PERIOD}
      - CONNECTOR_UPDATE_EXISTING_DATA=${CONNECTOR_UPDATE_EXISTING_DATA}
      - CONNECTOR_SCOPE=${CONNECTOR_SCOPE}
      - CONNECTOR_NAME=${CONNECTOR_NAME}

      - TPOTCE2OCTI_ELK_HOST=${TPOTCE2OCTI_ELK_HOST}
      - TPOTCE2OCTI_WEB_USER_RP=${TPOTCE2OCTI_WEB_USER_RP}
      - TPOTCE2OCTI_WEB_PASSWORD_RP=${TPOTCE2OCTI_WEB_PASSWORD_RP}
      - TPOTCE2OCTI_DOWNLOAD_PAYLOADS=${TPOTCE2OCTI_DOWNLOAD_PAYLOADS}
      - TPOTCE2OCTI_CREATE_NOTES=${TPOTCE2OCTI_CREATE_NOTES}
      - TPOTCE2OCTI_LIKELIHOOD_NOTES=${TPOTCE2OCTI_LIKELIHOOD_NOTES}
      - TPOTCE2OCTI_PROXY_URL=${TPOTCE2OCTI_PROXY_URL}
      - TPOTCE2OCTI_CREATE_AUTHOR=${TPOTCE2OCTI_CREATE_AUTHOR}
      - TPOTCE2OCTI_MARKING=${TPOTCE2OCTI_MARKING}
      - TPOTCE2OCTI_CREATE_LABELS=${TPOTCE2OCTI_CREATE_LABELS}
      - TPOTCE2OCTI_RETROFEED_START_DATE=${TPOTCE2OCTI_RETROFEED_START_DATE}
    
    restart: always
    networks:
      traefik:
    
networks:
  traefik:
    name: traefik_default 
    external: true