version: '3'
services:
  connector:
    build: ./mattermost-connector
    # container_name: ${CONTAINER_NAME}
    environment:
      # Connector's definition parameters:
      - CONNECTOR_TYPE=EXTERNAL_IMPORT
      - CONNECTOR_NAME=Mattermost
      - CONNECTOR_SCOPE=mattermost
      # Connector's generic execution parameters:
      - OPENCTI_URL=${OPENCTI_URL}
      - OPENCTI_TOKEN=${OPENCTI_TOKEN}
      - CONNECTOR_ID=${MATTERMOST_CONNECTOR_ID}
      - CONNECTOR_CONFIDENCE_LEVEL=${MATTERMOST_CONNECTOR_CONFIDENCE_LEVEL} # From 0 (Unknown) to 100 (Fully trusted).
      - CONNECTOR_LOG_LEVEL=${MATTERMOST_CONNECTOR_LOG_LEVEL}
      - CONNECTOR_RUN_EVERY=${MATTERMOST_CONNECTOR_RUN_EVERY}
      # Connector's custom execution parameters:
      - MATTERMOST_DOMAIN=${MATTERMOST_DOMAIN}
      - MATTERMOST_PORT=${MATTERMOST_PORT}
      - MATTERMOST_PROTOCOL=${MATTERMOST_PROTOCOL}
      - MATTERMOST_BASEPATH=${MATTERMOST_BASEPATH}
      - MATTERMOST_TOKEN=${MATTERMOST_TOKEN}
      - MATTERMOST_CHANNEL_IDS=${MATTERMOST_CHANNEL_IDS}
      - MATTERMOST_START_TIMESTAMP=${MATTERMOST_START_TIMESTAMP}
      - MATTERMOST_TLP=${MATTERMOST_TLP}
      - MATTERMOST_VERIFY=${MATTERMOST_VERIFY}
      - MATTERMOST_TIMEOUT=${MATTERMOST_TIMEOUT}
      - MATTERMOST_REQUEST_TIMEOUT=${MATTERMOST_REQUEST_TIMEOUT}
      - MATTERMOST_KEEPALIVE=${MATTERMOST_KEEPALIVE}
      - MATTERMOST_KEEPALIVE_DELAY=${MATTERMOST_KEEPALIVE_DELAY}
      - MATTERMOST_DEBUG=${MATTERMOST_DEBUG}
    restart: always

networks:
  default:
    external: true
    name: docker_default
