version: '3'
services:
  connector-s3:
    image: opencti/connector-s3:latest
    environment:
      - OPENCTI_URL=http://localhost
      - OPENCTI_TOKEN=ChangeMe
      - CONNECTOR_ID=ChangeMe
      - CONNECTOR_NAME=S3 Bucket
      - CONNECTOR_LOG_LEVEL=error
      - S3_REGION=us-east-1
      - S3_ENDPOINT_URL= # Optional, for S3-compatible services
      - S3_ACCESS_KEY_ID=ChangeMe
      - S3_SECRET_ACCESS_KEY=ChangeMe
      - S3_BUCKET_NAME=ChangeMe
      - S3_BUCKET_PREFIXES=ACI_TI,ACI_Vuln
      - S3_AUTHOR= # Optional, organization name for created_by_ref
      - S3_MARKING=TLP:GREEN # Optional, default marking
      - S3_INTERVAL=30 # Polling interval in seconds
      - S3_ATTACH_ORIGINAL_FILE=false # Attach original JSON to vulnerabilities
      - S3_DELETE_AFTER_IMPORT=true # Delete files from S3 after processing
      - S3_NO_SPLIT_BUNDLES=true # No split
    restart: always
